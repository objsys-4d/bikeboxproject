<!--FORM METHOD-->
{{Person_Dialog}}
<!--/FORM METHOD-->


<!--MODAL FORM-->
<div class="modal" id="person-dialog.html" tabindex="-1" role="dialog" aria-labelledby="person-dialog.html" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-gradient-primary">
                <h5 class="modal-title text-white">Select Person</h5>
            </div>
            <div class="modal-body bg-gray-100">
        
    <!--BODY-->
    <div class="mt-3 clearboth">
        <!--DATATABLE-->
        <table class="table table-hover mt-2" id="person" style="width:100%;">
            <thead>
                <!--COLUMNS-->
                <tr>
                    <th><!--SELECT RECORD--></th>
                    <th><!--HIDDEN PERSON_UUID--></th>
                    <th>{{%fullName}}</th>
                 </tr>
                 <!--/COLUMNS-->
            </thead>
        </table>
        <!--/DATATABLE-->
    </div>
    <!--/BODY-->

        </div>

            <div class="modal-footer bg-gray-100">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">{{%cancel}}</button>
                <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="ltgExecuteMethod('ParticipantEvent_Select')">Select</button>
            </div>
		
    </div>
</div>
<!--/MODAL FORM-->
        <script>

        // DATATABLES...
        
        var data = {{.personDataTable}};
        
        var table = ltgObj('person').DataTable(
            {
                data: data,
                columnDefs: [
                {
                    targets: [ 0 ], // SELECT RECORD
                    render: function ( data, type, row, meta ) {
                        if(type === 'display'){
                        
                            data = '<input type="checkbox" onclick="ltgFormAction(\'?action=select&record='+row[1]+'\');">';
                        }
    
                        return data;
                    },
                    sortable: false,
                },
                  {
                    targets: [ 1 ],// PERSON_UUID (HIDDEN)
                    visible: false, 
                },
                {
                    targets: [ 2 ], // PERSON DETAIL FORM LINK
                    render: function ( data, type, row, meta ) {
                        if(type === 'display'){
                        
                            data = '<a href="#" onclick="ltgFormAction(\'person-detail.html?action=edit&record='+row[1]+'\');">'+data+'</a>';
                        }
    
                        return data;
                    }
                }
            ],
            language: {'lengthMenu': '{{%page_Size}} _MENU_',
                       'emptyTable': '{{%records_none}}',
                       'paginate': {'previous': '{{%previous}}','next': '{{%next}}'}
            },
            order: [[ 2, 'asc' ]],
            info: false,
            responsive: true,
            searching: false,
            pageLength: 10
            }
        );

       // GOTO THE CORRECT LISTING PAGE AFTER RETURNING FROM DETAIL FORM WHICH IS ALSO PAGINATED
       
       table.page({{.personPageNumber}}).draw('page');

   /* DESTROY MODAL AFTER DISMISSING */
   ltgObj('person-dialog.html').on('hidden.bs.modal', function (e) {
     ltgDialogClose('person-dialog.html')
    })
        
    </script>